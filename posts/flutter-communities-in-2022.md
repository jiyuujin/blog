---
layout: Article.tsx
publish_date: 2022-12-24
title: 'Flutter ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã® 2022 å¹´'
description: 'ã“ã®è¨˜äº‹ã¯ Flutter Advent Calendar 2022 ã® 24 æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚ä»Šå¹´ã® Flutter ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚’ä¸­å¿ƒã«æŒ¯ã‚Šè¿”ã‚‹ã€‚'
slug: flutter-communities-in-2022
reaction: ğŸ¦Œ
category: Poem
tags:
  - Review
  - Flutter
  - Advent-Calendar
---

Qiita Advent Calendar ã«å‡ºç¨¿ã™ã‚‹ã®ã‚‚ä»Šæ—¥ãŒæœ€å¾Œã€ã“ã“ã«æ¥ã¦ç®¸ä¼‘ã‚ã§ã™ã€‚

ã“ã‚Œã¾ã§ã®æŠ€è¡“è¨˜äº‹ã¯ã“ã¡ã‚‰ã‚ˆã‚Šç¢ºèªã„ãŸã ã‘ã¾ã™ã€‚

- [Deep Dive into Vue Fes](https://blog.nekohack.me/posts/deep-dive-vuefes-2022)
- [Deep Dive into Rev Up](https://blog.nekohack.me/posts/deep-dive-revup-2022)

ä»Šå¹´ã¯ 2 ã¤ã®å¤§ããªæŠ€è¡“ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’è£ã§æ”¯æ´ã—ã¦ã„ã¾ã—ãŸã€‚

ä»•äº‹ã¨ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆåŒæ–¹ã§ãŠä¸–è©±ã«ãªã£ãŸ Vite ã®çŸ¥è¦‹ã‚’ç™ºä¿¡ã•ã›ã¦ã„ãŸã ã„ãŸã€‚

## ã‚¹ã‚±ãƒ¼ãƒ«ã¨æŒ‘æˆ¦ã® 2022 å¹´ã ã£ãŸ

ã¾ãšã¯ã€ã“ã‚Œã¾ã§ã®ãµã‚Šã‹ãˆã‚Šã‚’ä¸‹ã«ç¤ºã—ã¦ã¿ã¾ã™ã€‚

- [Flutter ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã® 2021 å¹´](https://blog.nekohack.me/posts/flutter-communities-in-2021)
- [Flutter ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã® 2020 å¹´](https://blog.nekohack.me/posts/flutter-communities-in-2020)

ä¸­ã§ã‚‚ä¸€ç•ªã®é£›èºã‚’é‚ã’ãŸ 2021 å¹´ã¨é•ã£ã¦ä»Šå¹´ã€å€‹äººã¨ã—ã¦ Flutter ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®å¤§ãã„ãƒ‹ãƒ¥ãƒ¼ã‚¹ã¯ 3 ã¤ã‚ã‚Šã¾ã—ãŸã€‚

- Flutter ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ FlutterKaigi 2022 ã®ã‚ªãƒ¼ã‚¬ãƒŠã‚¤ã‚ºã¨ãã®ã‚¹ã‚±ãƒ¼ãƒ«
- FlutterKaigi 2022 ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã¸ã®ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆ
- Flutter ãƒãƒ³ã‚ºã‚ªãƒ³ä¼ç”»ã¸ã®é«˜ã„ç²¾åº¦

ç§è‡ªèº«ã¯ä»Šå¹´ã€ç¾åœ°ã‚ˆã‚Š FlutterKaigi ã®é…ä¿¡ã‚’è¦‹å®ˆã‚Šã¾ã—ãŸã€‚

![](https://i.imgur.com/QFKIMkv.jpg)

ä¸­ã§ã‚‚ FlutterKaigi ã®é‹å–¶ã«æºã‚ã‚‹ã‚¹ã‚¿ãƒƒãƒ•ã‚’ã‚¹ã‚±ãƒ¼ãƒ«ã—ãŸçµŒé¨“ã“ãã€ä¸€ç•ªä¾¡å€¤ãŒã‚ã‚Šã¾ã—ãŸã€‚

2021 å¹´ã€æºã‚ã£ãŸã‚¹ã‚¿ãƒƒãƒ•ä¸€è¦§ã‚’ä¸‹ã«ç¤ºã—ã¾ã™ã€‚

![](https://i.imgur.com/9u4ocyw.png)

ãã—ã¦ä»Šå¹´ 2022 å¹´ã€æºã‚ã£ãŸã‚¹ã‚¿ãƒƒãƒ•ä¸€è¦§ã‚’ä¸‹ã«ç¤ºã—ã¾ã™ã€‚

![](https://i.imgur.com/4475MVb.png)

ç‡ç›´ã«æ•°ã§è¦‹ã‚‹ã¨ 2 å€ã‚‚ã€æ„æ¬²ã‚ã‚‹ã‚¹ã‚¿ãƒƒãƒ•ã«æ¥ã¦ã„ãŸã ãã¾ã—ãŸã€‚

ã“ã‚Œã‚‚ 6 æœˆæœ«ã€ã‚¹ã‚¿ãƒƒãƒ•å‹Ÿé›†ã‚’æ­£å¼ã« [å‘ŠçŸ¥](https://medium.com/flutterkaigi/flutterkaigi-2022%E3%81%AB%E5%90%91%E3%81%91%E3%81%A6-45323dbbe0fb) ã•ã›ã¦ã„ãŸã ã„ãŸçµæœã€ã“ã‚Œã»ã©ã®æ–¹ã€…ã«æ¥ã¦ã„ãŸã ã„ãŸãŠé™°ã¨ãªã£ã¦ã„ã¾ã™ã€‚

https://medium.com/flutterkaigi/flutterkaigi-2022%E3%81%AB%E5%90%91%E3%81%91%E3%81%A6-45323dbbe0fb

ã„ã¾ä¸€åº¦ã“ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã«ã€æ„Ÿè¬ã‚’ç”³ã—ä¸Šã’ã¾ã™ã€‚

### FlutterKaigi 2022 ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆé–²è¦§ä»¶æ•°

ä»Šå¹´ã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã§ã¯ã€æ–°ãŸã« Google ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ 4 ã‚’å°å…¥ã—ã¦ã„ã¾ã™ã€‚

`web/index.html` ã« `G-XXXXXXXXXX` ã‚’è¨­å®šã—ã¾ã™ã€‚

```html
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
<script>
  window.dataLayer = window.dataLayer || []
  function gtag() {
    dataLayer.push(arguments)
  }
  gtag('js', new Date())
  gtag('config', 'G-XXXXXXXXXX')
</script>
```

Google ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ 4 ã®è¨­å®šã¯ã€è‡³ã£ã¦ã‚·ãƒ³ãƒ—ãƒ«ã¨ãªã‚Šã¾ã™ã€‚

ã¨ã€ã“ã“ã‹ã‚‰å…ˆã¯ Web é–‹ç™ºè€…ã®ä¸€å‚è€ƒè³‡æ–™ã¨ã—ã¦ã€èã„ã¦ã„ãŸã ã‘ã‚Œã°ã€‚

07 æœˆ 19 æ—¥ (ç«) ã‹ã‚‰ 11 æœˆ 29 æ—¥ (ç«) ã¾ã§ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¨ˆæ¸¬ã—ã¾ã—ãŸã€‚

- ãƒ¦ãƒ¼ã‚¶ãƒ¼ 4932 å

é–²è¦§è€…ã®åˆ©ç”¨ OS ã¯ã€ä»¥ä¸‹ã®é€šã‚Šã¨ãªã‚Šã¾ã™ã€‚

- macOS 50%
- iOS 27%
- Windows 13%
- Android 10%
- Others (Linux) 1%

Web é–‹ç™ºè€…ã¨ã—ã¦æ°—ã«ãªã‚‹ã®ã¯ã€é–²è¦§è€…ã® Web ãƒ–ãƒ©ã‚¦ã‚¶ã®æ¯”ç‡ã§ã—ã‚‡ã†ã‹ã€‚

- Chrome 66%
- Safari (in-app å«ã‚€) 29%
- Edge 2%
- Firefox 1%
- Others (Android Webview, etc) 1%

æ™‚ã‚’åŒã˜ãã—ã¦ [Vue Fes Japan Online 2022](https://vuefes.jp/2022) ã¨æ¯”è¼ƒã™ã‚‹ã‚‚ã€å…¨ãåŒã˜æ¯”ç‡ã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

Vue Fes ã®è©³ç´°ã¯ [Deep Dive into Vue Fes 2022](https://blog.nekohack.me/posts/deep-dive-vuefes-2022) ã‚’ã”ç¢ºèªãã ã•ã„ã€‚

## 2022 å¹´ Flutter æŠ€è¡“å‹•å‘

FlutterKaigi ã‚ˆã‚Šå¤§ããè©±é¡Œã¯å¤‰ã‚ã£ã¦ã€ä»Šå¹´ã®ãµã‚Šã‹ãˆã‚Šã§ã¯ Flutter ã®æŠ€è¡“å‹•å‘ã«ã‚‚è§¦ã‚Œã¦ã„ããŸã„ã€‚

ä¸»ãª Flutter SDK ã®æ›´æ–°ã‚’ä¸‹ã«ç¤ºã—ã¦ã¿ã¾ã—ãŸã€‚

- Flutter [2.10](https://medium.com/flutter/whats-new-in-flutter-2-10-5aafb0314b12)
- Flutter [3](https://medium.com/flutter/introducing-flutter-3-5eb69151622f)
- Flutter [3.3](https://medium.com/flutter/whats-new-in-flutter-3-3-893c7b9af1ff)

ã„ã¤ã‚‚ãªãŒã‚‰ stable ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã¨ã³ã¨ã³æ„ŸãŒéš›ç«‹ã£ã¦ã„ã¾ã™ã­ã€‚

å…·ä½“çš„ã«ã¯ [2.10](https://medium.com/flutter/whats-new-in-flutter-2-10-5aafb0314b12) ã® Windows å‘ã‘ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã€[3](https://medium.com/flutter/introducing-flutter-3-5eb69151622f) ã® macOS ä¸¦ã³ã« Linux å‘ã‘ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã®ã‚µãƒãƒ¼ãƒˆãŒã‚ã‚Šã¾ã—ãŸã€‚

ãã‚“ãªä¸­ä»Šæœˆ 8 æ—¥ã€æ¥å¹´ 2023 å¹´ã®ä¸­é ƒã«ã‚‚ Dart 3 ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã‚‹äºˆå®šã®æ—¨ã¨ [ã‚¢ãƒŠã‚¦ãƒ³ã‚¹](https://medium.com/dartlang/the-road-to-dart-3-afdd580fbefa) ãŒãªã•ã‚Œã¦ã„ã¾ã™ã€‚

ã–ã£ãã‚Šä»¥ä¸‹é …ç›®ã‚’æŒ™ã’ã¦ãŠã‚Šã€ãã®è©³ç´°ã¯åŒã˜ãæ¥å¹´ 1 æœˆ 23 æ—¥ã® Flutter Festival ã§å…¬è¡¨ã•ã‚Œã¾ã™ã€‚

- å®Œå…¨ãª Null-Safety ã‚’ã‚µãƒãƒ¼ãƒˆ
- Web Assembly (WASM) ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆ
- Macros ([é™çš„ãƒ¡ã‚¿ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°](https://github.com/dart-lang/language/blob/master/working/macros/feature-specification.md))
- ãã®ä»–
  - ã‚³ã‚¢ãƒ©ã‚¤ãƒ–ãƒ©ãƒª API ã®å‰Šé™¤ ([#49529](https://github.com/dart-lang/sdk/issues/49529))
  - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ­´å²çš„ãªæ§‹æ–‡ã®å‰Šé™¤ ([#2357](https://github.com/dart-lang/language/issues/2357))
  - æ˜ç¤ºçš„ãª tear-off ã®è¦æ±‚ ([#2399](https://github.com/dart-lang/language/issues/2399))

ã“ã®ã†ã¡ã€Dart 2.12 ã®ãƒªãƒªãƒ¼ã‚¹ã‚ˆã‚Š 3 å¹´ã‚’çµŒã¦ Null-Safety ã®ã‚µãƒãƒ¼ãƒˆãŒå®Œçµã•ã‚Œã‚‹ã¨æ˜è¨€ã—ãŸã®ã¯å¤§å¤‰æ„ç¾©æ·±ã„ã§ã—ã‚‡ã†ã€‚

å®Ÿéš›ã«é™çš„å‹ä»˜ã®ç­†é ­ TyoeScript ã‚’ [ä¾‹](https://www.typescriptlang.org/play?#code/MYGwhgzhAECyCeAVeAHApgHkQPmgbwChpoA3MEAVzWgC5pEBuI6YAewDsIAXAJwuC6seACgD6ZStTqIAlPi4ALAJYQAdBKrQAvNHHkqDAL4FjBAGYV2ApR2hgAJvYCC7eIqXsA5hgCi2YWA8PGDwdE5BIb7YADTQaCBoALZo7Fx0PnKExMSBwfCqKBQQCsLxSSlcMkymZDykAIx0CMjoGOwUiQBGaHUAPtDtICC4OuxoAO5wSKhowgAsAExVBLWkC9oNTGycrAmqIKyewgAGAMSNDdAq0AAkeCT16vpohrEk69d370+ShscyBAISjM0GEDx+mgAhKMKENMswAPQI6AAETQoEC1AAHnYYOwOABaQbgToJWKdChcaDjajAMDsaDcJRDXEQJSeBnE6CCK5pZjfDTUGFDJjEVY4ujtLo9DbgwUMYjMbYQXZofaHE6nBaSwlcnEqOh3LF-AGmJHQJzQEAqKmsEH49hE2EgaAASVSahWgWgiXgABkbWEIvA2h1ujwRtAANr1WILWKLAC6TAI5qcjjsA2dqgt7HsmYdTulPBzAAUeB4qYpqDw0BBYVxVAQHM5XO4vMJfQHuLFicsWy43MovBgAPKdABW6K4-i7NtiACJEMoYNd8VS0CQUgWwz0F8tlar1UcF6cAMx0a3cK4QGgL2Jz7jLIA) ã«ã€ãã†ã—ãŸ Null-Safety ã®æ©æµã‚’é–‹ç™ºè€…ãŒå—ã‘ã‚‰ã‚Œã‚‹ã®ã¯å¤§å¤‰å¹¸ã›ã«ãªã‚Šã¾ã™ã€‚

Dart 3 ã®æ¦‚è¦ã«ã¤ã„ã¦ã€Dart å…¬å¼ Medium ã§è¿°ã¹ã‚‰ã‚Œã¦ã„ã‚‹ã®ã§ã€ãã¡ã‚‰ã‚‚åˆã‚ã›ã¦ã”ç¢ºèªã„ãŸã ããŸã„ã€‚

https://medium.com/dartlang/the-road-to-dart-3-afdd580fbefa

æ˜¨å¹´ã® Google I/O ã§ç™ºè¡¨ã•ã‚ŒãŸ Material 3 ã®å¯¾å¿œã«ã¤ã„ã¦ã€Flutter é–‹ç™ºãƒãƒ¼ãƒ ã§å¤šãã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ Flutter ã¸ç§»è¡Œã—ç¶šã‘ã¦ã„ã¾ã™ã€‚

ã“ã® Material 3 é€²æ—çŠ¶æ³ã¯ GitHub [issue](https://github.com/flutter/flutter/issues/91605) ã‚’ã”ç¢ºèªã„ãŸã ããŸã„ã€‚

https://github.com/flutter/flutter/issues/91605

### Flutter ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã§ã¯

FlutterKaigi 2022 ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã§ã‚‚ã€ã„ãã¤ã‹ (ä¸­ã§ã‚‚ serverpod ä»¥å¤–ã§) ãŠä¸–è©±ã«ãªã£ã¦ã„ã¾ã™ã€‚

- go_router
- riverpod
- serverpod

#### go_router

æ˜¨å¹´ã® FlutterKaigi 2021 ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«å¼•ãç¶šãã€ã‚¢ãƒ—ãƒªå†…ã§å®Œçµã•ã›ã‚‹ãŸã‚ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’è¨­å®šã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚

ãŸã ã—æ˜¨å¹´ã»ã©ã€ãã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’åˆ©ç”¨ã™ã‚‹ã«ã¯è‡³ã£ã¦ã„ã¾ã›ã‚“ã€‚

ã¡ãªã¿ã«ã€æ˜¨å¹´ã¯ä»¥ä¸‹ã«ç¤ºã™é€šã‚Šã®ãƒšãƒ¼ã‚¸ã‚’å„ç¨®æº–å‚™ã—ã€ãã‚Œã«ä¼´ã„ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’è¨­å®šã—ã¾ã—ãŸã€‚

- ãƒˆãƒƒãƒ—
- ã‚¹ã‚¿ãƒƒãƒ•ä¸€è¦§
- æ¡æŠã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸€è¦§
- (å³å¯†ã«è¨€ãˆã°ãƒšãƒ¼ã‚¸ã§ã¯ç„¡ã„) ãƒ©ã‚¤ã‚»ãƒ³ã‚¹
- ãƒ†ã‚£ãƒ¼ã‚¶ãƒ¼ (å¹•é–“ç”¨)
- ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ«ãƒ¼ãƒ‰ (å¹•é–“ç”¨)

ã—ã‹ã—ã€ä»Šå¹´ã¯ãƒˆãƒƒãƒ—ã®ã¿ãƒšãƒ¼ã‚¸ã‚’æº–å‚™ã™ã‚‹ä»•æ§˜ã¨ãªã£ã¦ã„ã¾ã™ã€‚

æ˜¨å¹´ã® FlutterKaigi 2021 ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«ã¤ã„ã¦ã€è©³ç´°ãŒæ°—ã«ãªã‚‹æ–¹ã¯ä»¥ä¸‹ã® [è¨˜äº‹](https://blog.nekohack.me/posts/thanks-to-join-flutterkaigi-2021) ã‚’ã”ç¢ºèªã„ãŸã ããŸã„ã€‚

[FlutterKaigi 2021 ãŠç–²ã‚Œã•ã¾ã§ã—ãŸ](https://blog.nekohack.me/posts/thanks-to-join-flutterkaigi-2021)

å®Ÿéš›ã€ä»Šå¹´ã¯ãƒˆãƒƒãƒ—ã®ã¿ãƒšãƒ¼ã‚¸ã‚’æº–å‚™ã™ã‚‹ä»•æ§˜ã¨ãªã£ã¦ã„ã¾ã™ãŒã€è£½ä½œå‰ã®è¨­è¨ˆæ®µéšã§ã¯ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’ä½¿ç”¨ã™ã‚‹å‰æã§ã—ãŸã€‚

çµæœçš„ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ã€ä»Šå›åˆã‚ã¦ãŠä¸–è©±ã«ãªã£ãŸ [go_router](https://pub.dev/packages/go_router) ãŒä¸€ç•ªã€ä½¿ã„ã‚„ã™ã„ã®ã§ã¯ (ã¨ã€ç§æ„Ÿ)

ã¨ã„ã†ã®ã‚‚ã€åŸºæœ¬çš„ã« `path` ã¨ `builder` (ãƒšãƒ¼ã‚¸ã®ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆãªã©) ã‚’è¨­å®šã™ã‚‹ã ã‘ã§ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’ç®¡ç†ã§ãã¾ã™ã€‚

```dart
import 'package:go_router/go_router.dart';

final _router = GoRouter(
  routes: [
    GoRoute(
      path: '/',
      builder: (_, __) => const TopPage(),
    ),
  ],
);
```

å†…éƒ¨çš„ã«ã¯ ChangeNotifier ã¨ã„ã† [ä»•çµ„ã¿](https://github.com/flutter/packages/blob/main/packages/go_router/lib/src/router.dart#L46) ã®ä¸‹ã§å‹•ã„ã¦ã„ã¾ã™ã€‚

https://github.com/flutter/packages/blob/main/packages/go_router/lib/src/router.dart#L46

ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®å¤‰æ›´æ¤œçŸ¥ç”¨ã«ã€åˆã‚ã›ã¦ ChangeNotifierProvider ã‚’ä½¿ç”¨ã—ã¦ã€ãã®å¤‰åŒ–ã«å¯¾å¿œã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã¨ãªã‚Šã¾ã™ã€‚

ã¾ãš Flutter ã«ã¯ã€å‘½ä»¤å‹ API (Navigator 1.0)ã€å®£è¨€å‹ API (Navigator 2.0) 2 ç¨®é¡ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚

ã“ã® Navigator 2.0 ã¯å°‘ã€…ç™–ã‚‚ã® (ç§æ„Ÿ) ã®ä¸€æ–¹ã§ã€Navigator 1.0 ã¨ä¸€ç·’ã«ä½¿ç”¨ã§ãã€å¿…ãšã—ã‚‚ãã‚Œã‚‰ã‚’ç½®ãæ›ãˆã‚‹ã‚‚ã®ã§ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚

#### Riverpod

ä»Šå¹´ã® FlutterKaigi 2022 ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã§ã¯ã€çŠ¶æ…‹ç®¡ç†ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ Riverpod ã‚‚åˆã‚ã›ã¦ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚

åŸºæœ¬çš„ã«ã¯ã€main.dart ãªã©ã®æœ€ä¸Šä½ãƒ«ãƒ¼ãƒˆã¸ `ProviderScope` ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€å…¨ã¦ã® Provider ãŒ global ã«å®£è¨€ã•ã‚Œã‚‹ã‚ˆã†ãªã‚Šã¾ã™ã€‚

```dart
void main() {
  runApp(ProviderScope(
    child: MyApp(),
  ));
}
```

Provider ã§ go_router ã‚’å›²ã‚“ã§å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

```dart
import 'package:confwebsite2022/pages/index.dart';
import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';
import 'package:hooks_riverpod/hooks_riverpod.dart';

final routerProvider = Provider(
  (ref) => GoRouter(
    debugLogDiagnostics: true,
    routes: [
      GoRoute(
        path: '/',
        builder: (_, __) => const TopPage(),
      ),
    ],
    errorPageBuilder: (context, state) => MaterialPage(
      key: state.pageKey,
      child: Scaffold(
        body: Center(
          child: Text(state.error.toString()),
        ),
      ),
    ),
  ),
);
```

ãã‚“ãª Riverpod ã‚‚ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã®ã²ã¨ã¤ [Vite](https://ja.vitejs.dev/) ã¨åŒã˜ãã€ãƒªãƒªãƒ¼ã‚¹ã‚µã‚¤ã‚¯ãƒ«ã¯é•·ãã‚ã‚Šã¾ã›ã‚“ã€‚

ã„ã¤ã®é–“ã«ã‹ Riverpod ãŒ v1 ã•ã‚‰ã« v2 ã¸ã€ãƒ†ãƒ³ãƒã‚ˆãæ›´æ–°ã•ã‚Œã¦ãŠã‚Šã€ä¸­ã§ã‚‚ v2 ã®ãƒªãƒªãƒ¼ã‚¹ãŒã€ä»Šå¹´ 2022 å¹´ã®å¤§ããªç›®ç‰ã®ã²ã¨ã¤ã¨ãªã‚Šã¾ã™ã€‚

ã§ã¯ã€æ—©é€Ÿ pubspec.yaml ã® [flutter_riverpod](https://pub.dev/packages/flutter_riverpod) ã‚’ 2 ç³»ã«æ›´æ–°ã—ã¾ã™ã€‚

```yaml
dependencies:
  flutter:
    sdk: flutter
  flutter_riverpod: ^2.0.2
```

ãã‚‚ãã‚‚ Riverpod ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹å ´é¢ã§ãã‚ŒãŒå¿…è¦ã¨ã•ã‚Œã‚‹ç†ç”±ã«ã¤ã„ã¦ã¯ã€[Provider](https://pub.dev/packages/provider) ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ¬ ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚

Provider ã®è¨­è¨ˆä¸Šã€æ”¹è‰¯ã—ãŸ [InheritedWidget](https://api.flutter.dev/flutter/widgets/InheritedWidget-class.html) ã«åŸå› ãŒã‚ã‚Šã€ãã‚ŒãŒèµ·å› ã—ã¦ ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ ãƒ„ãƒªãƒ¼ã«ä¾å­˜ã™ã‚‹ã¨ã„ã†æ‚ªå¾ªç’°ã‚’å¼•ãèµ·ã“ã—ã¦ã„ã¾ã™ã€‚

```
ğŸ—‚ MyApp
   â”” ğŸ—‚ Provider
      â”” ğŸ—‚ MaterialApp
         â”” ğŸ—‚ Widget
            â”” ğŸ—‚ SignIn <- Provider ã‚’ãƒ©ãƒƒãƒ—ã—ãªã„å ´åˆã« ProviderNotFoundException ã‚’å¼•ãèµ·ã“ã™
            â”” ğŸ—‚ Provider
               - Signed
```

ä¸Šã«ç¤ºã—ãŸã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆãƒ„ãƒªãƒ¼ã®ã‚ˆã†ã«ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’ Provider ã§ãƒ©ãƒƒãƒ—ã—ã¦ã„ãªã„é™ã‚Šã€ProviderNotFoundException ã‚’å¼•ãèµ·ã“ã—ã¦ã—ã¾ã„ã¾ã™ã€‚

ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ç™»å ´ã—ãŸã®ãŒ Riverpod ã§ã€å…¨ã¦ã® Provider ãŒ global ã«å®£è¨€ã•ã‚Œã¾ã™ã€‚

ã§ã¯ã€ãã® Riverpod ã«ã¤ã„ã¦ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰ã‚’ä¸­å¿ƒã«ç¢ºèªã—ã¾ã™ã€‚

ã¾ãš Riverpod 0.14 ã‚’ 1.0 ã¸æ›´æ–°ã™ã‚‹éš›ã«ã€Provider ã‚’åˆ©ç”¨ã™ã‚‹æ§‹æ–‡ã«å¤‰æ›´ãŒã‚ã‚Šã¾ã™ã€‚

```dart
// Riverpod 0.14
Widget build(BuildContext context, ScopedReader watch) {
  MyModel state = watch(provider);
}
```

`ref.watch(provider)` ã®ã²ã¨ã¤ã«çµ±ä¸€ã•ã‚Œã¾ã—ãŸã€‚

```dart
// Riverpod 1.0
Widget build(BuildContext context, WidgetRef ref) {
  MyModel state = ref.watch(provider);
}
```

ã¾ãŸ ConsumerWidget ã® `build` ã¨ã€Consumer ã® `builder` ã®ã‚·ã‚°ãƒãƒãƒ£ã‚‚å¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚

ç¶šã„ã¦ Riverpod 2.0 ã¸æ›´æ–°ã™ã‚‹éš›ã¯ã€æ–°ã—ã [riverpod_generator](https://pub.dev/packages/riverpod_generator) ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

riverpod_generator ã® `@riverpod` ã¯ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å†…ã®ã‚¯ãƒ©ã‚¹ã¨ãƒ¡ã‚½ãƒƒãƒ‰ã® Provider ã‚’è‡ªå‹•çš„ã«ç”Ÿæˆã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã§ãã‚‹æ³¨é‡ˆ API ã¨ãªã‚Šã¾ã™ã€‚

#### Serverpod

ç›®ä¸‹ã€Dart ã§ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’æ›¸ã‘ã‚‹ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ Serverpod ãŒé–‹ç™ºã•ã‚Œã¦ã„ã¾ã™ã€‚

v1 ã¸ã®ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã¯ [ã“ã¡ã‚‰](https://github.com/serverpod/serverpod/projects/1) ã«ã‚ã‚Šã¾ã™ã€‚

https://github.com/serverpod/serverpod/projects/1

[serverpod_cli](https://pub.dev/packages/serverpod_cli) ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```bash
# serverpod_cli
dart pub global activate serverpod_cli
```

åˆã‚ã›ã¦ [Docker](https://www.docker.com/) ã‚‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚

```bash
# serverpod create
serverpod create mypod
```

`docker-compose` ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€Serverpod ã‚’èµ·å‹•ã—ã¾ã™ã€‚

```bash
docker-compose up --build --detach
serverpod run
```

### Web ã®æ›¸ãå¿ƒåœ°ã‚’å®Ÿæ„Ÿã™ã‚‹

å½“åˆ url_launcher ã® `launch()` ã‚’åˆ©ç”¨ã—ãŸéš›ã«ã€Web ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ãã®ãƒªãƒ³ã‚¯ã‚’ç¢ºèªã§ãã¾ã›ã‚“ã€‚

æ°¸ã‚‰ã FlutterKaigi ã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«ãŠã„ã¦ã¯ã€ã“ã®æ‰‹ã® Web ä½“é¨“ãŒæãªã‚ã‚Œã¦ã—ã¾ã£ã¦ã„ã¾ã—ãŸã€‚

```dart
import 'package:url_launcher/url_launcher.dart';

ElevatedButton.icon(
  onPressed: () async => {
    await launch(
      'https://twitter.com/intent/tweet?hashtags=FlutterKaigi',
      webOnlyWindowName: '_blank',
    );
  },
  style: ElevatedButton.styleFrom(
    shape: const StadiumBorder(),
  ),
  icon: SvgPicture.asset(Assets.twitterWhite, width: 20),
  label: Text(appLocalizations.tweet),
),
```

ä¸€èˆ¬çš„ãª Web ã‚µã‚¤ãƒˆã®ã‚ˆã†ã«ã€ãƒã‚¦ã‚¹ã‚ªãƒ¼ãƒãƒ¼ã™ã‚‹ã“ã¨ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚¢ãƒ³ã‚«ãƒ¼ãƒªãƒ³ã‚¯ã‚’ç¤ºã™ã“ã¨ã«ã—ã¾ã™ã€‚

url_launcher ã® `Link` ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€ãã‚Œã‚’å®Ÿç¾ã•ã›ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```dart
import 'package:url_launcher/link.dart';

Link(
  uri: Uri.parse(
    'https://twitter.com/intent/tweet?hashtags=FlutterKaigi'),
  target: LinkTarget.blank,
  builder: (BuildContext ctx, FollowLink? openLink) {
    return ElevatedButton.icon(
      onPressed: openLink,
      style: ElevatedButton.styleFrom(
        shape: const StadiumBorder(),
      ),
      icon: SvgPicture.asset(Assets.twitterWhite, width: 20),
      label: Text(appLocalizations.tweet),
    );
  },
),
```

`target` ã« `LinkTarget.blank` ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ç‹¬ç«‹ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¨ã—ã¦æŒ‡å®šã®ãƒªãƒ³ã‚¯ãŒé–‹ã‹ã‚Œã¾ã™ã€‚

### Web ä½“é¨“ã«è¿‘ä»˜ã‘ã‚‹åŠªåŠ›ã‚’æƒœã—ã¾ãªã„

ä¸€èˆ¬çš„ãª Web ã‚µã‚¤ãƒˆã§ã¯å½“ãŸã‚Šå‰ã®ã‚ˆã†ã«ã€ãƒãƒƒã‚·ãƒ¥ (`#`) ä»˜ã URL ã‚’å®Ÿè£…ã§ãã¾ã™ã€‚

ã—ã‹ã— Flutter (Web) ã§ã¯ã€ãã®å®Ÿè£…ãŒå¤§å¤‰é›£ã—ã„ã¨åˆ¤æ˜ã€ä»–ã®æ–¹æ³•ã‚’æ¨¡ç´¢ã—ã¾ã™ã€‚

ãã“ã§ [`Scrollable.ensureVisible`](https://api.flutter.dev/flutter/widgets/Scrollable/ensureVisible.html) ã‚’åˆ©ç”¨ã™ã‚Œã°ã€ç‰¹å®šã® ID ã«å¯¾ã—è‡ªå‹•ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

```dart
Future<void> animationScroll(Object anchor) async {
  final context = GlobalObjectKey(anchor).currentContext;
  if (context == null) {
    throw ErrorDescription(
        "An unregistered object was passed in animationScroll.\nYou should register GlobalObjectKey for some widget.");
  }
  await Scrollable.ensureVisible(context,
      duration: const Duration(milliseconds: 1000),
      curve: Curves.fastOutSlowIn);
}
```

å®Ÿè£…äºˆå®šã ã£ãŸã€ãƒãƒƒã‚·ãƒ¥ä»˜ã URL ã® ID ã‚’å¼•æ•°ã®ã²ã¨ã¤ã¨ã—ã¦å—ã‘å…¥ã‚Œã¾ã™ã€‚

ã‚ã‚‰ã‹ã˜ã‚ã€ã“ã® ID ä¸€è¦§ã‚’ enum ã§å®šç¾©ã™ã‚‹ã“ã¨ã¨ã—ã¾ã™ã€‚

```dart
enum MenuItem { staff, timetable, sponsor }
```

`animationScroll()` ã«å€‹åˆ¥ã® ID ã‚’å—ã‘å…¥ã‚Œã‚‹ã“ã¨ã§ã€è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚

```dart
String urlString;
switch (result) {
  case MenuItem.staff:
    await animationScroll(MenuItem.staff);
    return;
  case MenuItem.timetable:
    await animationScroll(MenuItem.timetable);
    return;
  case MenuItem.sponsor:
    await animationScroll(MenuItem.sponsor);
    return;
}
```

ä¸€èˆ¬çš„ãª Web ã‚µã‚¤ãƒˆã®ã‚ˆã†ãªä½“é¨“ã¯é›£ã—ã„ (å®Ÿç¾ã§ãã‚‹ã¨ã„ãˆã°) ãŒã€ãã‚Œã«è¿‘ä»˜ã‘ã‚‹åŠªåŠ›ã‚’æƒœã—ã¿ã¾ã›ã‚“ã€‚

<video controls playsinline width="100%" autoplay loop muted="true" type="video/mp4" src="https://i.imgur.com/bQ6tvWK.mp4">
  Sorry, your browser doesn't support embedded videos.
</video>

## æœ€å¾Œã«

Flutter ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã«é™ã‚‰ãšã€æ¥å¹´ 2023 å¹´ã‚‚ã€ŒæŒ‘æˆ¦ã€ã®å§¿å‹¢ã‚’å¿˜ã‚Œã‚‹ã“ã¨ç„¡ãã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®é‹å–¶ã‚’é‚é€²ã—ã¦ã„ã‘ã‚Œã°å¹¸ã„ã§ã™ã€‚
